<ng-container *ngIf="isLoading$ | async">
  <nz-skeleton-element
    nzType="input"
    [nzActive]="true"
    style="width: 200px"
  ></nz-skeleton-element>
  <nz-skeleton *ngFor="let i of range(0, 5)" [nzActive]="true"></nz-skeleton>
  <nz-skeleton-element
    nzType="input"
    [nzActive]="true"
    style="width: 200px"
  ></nz-skeleton-element>
</ng-container>
<nz-empty
  *ngIf="$any(results$ | async)?.length === 0 && (isLoading$ | async) === false"
></nz-empty>
<ng-container
  *ngIf="$any(results$ | async)?.length > 0 && (isLoading$ | async) === false"
>
  <ess-pagination
    [paginationData]="$any(paginationData$ | async)"
    [loading]="(isLoading$ | async) ?? false"
    (activePageChange)="pageNr$.next($event)"
  ></ess-pagination>
  <ng-container
    *ngFor="let result of results$ | async; trackBy: trackByResultId"
  >
    <ess-result
      *ngIf="
        result.type.value.toString().includes('provider');
        else defaultResultTemplate
      "
      class="results"
      [id]="result.id"
      [title]="result.title"
      [tags]="result.tags"
      [horizontal]="result.horizontal"
      [coloredTags]="result.coloredTags ?? []"
      [languages]="result.languages ?? []"
      [license]="result.license"
      [documentType]="result.documentType"
      [secondaryTags]="result.secondaryTags ?? []"
      [views]="result.views"
      [description]="result.description | transformArrayDescriptionPipe"
      [abbreviation]="result.abbreviation ?? ''"
      [type]="result.type"
      [date]="result.date"
      [highlights]="highlights[result.id] ?? {}"
      [url]="result.url"
      [urls]="result.urls ?? []"
      [isResearchProduct]="result.isResearchProduct"
      [resourceType]="result.collection"
    ></ess-result>
    <ng-template #defaultResultTemplate>
      <ess-result
        class="results"
        [id]="result.id"
        [title]="result.title"
        [description]="result.description | transformArrayDescriptionPipe"
        [type]="result.type"
        [url]="result.url"
        [urls]="result.urls ?? []"
        [tags]="result.tags"
        [horizontal]="result.horizontal"
        [documentType]="result.documentType"
        [coloredTags]="result.coloredTags ?? []"
        [languages]="result.languages ?? []"
        [license]="result.license"
        [secondaryTags]="result.secondaryTags ?? []"
        [views]="result.views"
        [downloads]="result.downloads"
        [accessRight]="result.accessRight"
        [date]="result.date"
        [highlights]="highlights[result.id] ?? {}"
        [offers]="result.offers ?? []"
        [isResearchProduct]="result.isResearchProduct"
        [providerName]="result.providerName"
      ></ess-result>
    </ng-template>
  </ng-container>

  <ess-pagination
    [paginationData]="$any(paginationData$ | async)"
    [loading]="(isLoading$ | async) ?? false"
    (activePageChange)="pageNr$.next($event)"
  ></ess-pagination>
</ng-container>
